<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Virtual Lab - Pentest avec Metasploit</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="header">
      <h1>üîí Virtual Lab - Pentest avec Metasploit</h1>
      <p>
        Rapport acad√©mique sur la s√©curit√© offensive et les tests d'intrusion
      </p>
      <div class="badges">
        <span class="badge">üõ°Ô∏è Cybers√©curit√©</span>
        <span class="badge">üîç Pentest</span>
        <span class="badge">‚öôÔ∏è Metasploit</span>
        <span class="badge">üåê pfSense</span>
        <span class="badge">üñ•Ô∏è Virtual Lab</span>
      </div>
    </div>

    <div class="container">
      <div class="section">
        <h2>üìã √Ä propos du projet</h2>
        <p>
          Ce rapport pr√©sente un laboratoire virtuel complet de test d'intrusion
          utilisant <strong>Metasploit Framework</strong>. Le projet d√©montre
          une m√©thodologie professionnelle de pentest, de la reconnaissance
          r√©seau √† l'exploitation avanc√©e avec pivoting.
        </p>

        <div class="highlight-box">
          <h3>üéØ Objectifs du projet</h3>
          <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
            <li>
              Mettre en place un environnement virtuel s√©curis√© pour les tests
              d'intrusion
            </li>
            <li>
              Configurer un pare-feu pfSense avec r√®gles de filtrage
              personnalis√©es
            </li>
            <li>Exploiter des vuln√©rabilit√©s avec Metasploit Framework</li>
            <li>
              R√©aliser des attaques avanc√©es (pivoting, pass-the-hash, brute
              force)
            </li>
            <li>
              Documenter les techniques d'exploitation et recommandations de
              s√©curit√©
            </li>
          </ul>
        </div>
      </div>

      <div class="section">
        <h2>üéì Comp√©tences d√©velopp√©es</h2>
        <div class="highlight-box">
          <ul style="margin-left: 1.5rem">
            <li>
              <strong>Reconnaissance r√©seau</strong> : Nmap, arp-scan,
              √©num√©ration de services
            </li>
            <li>
              <strong>Exploitation de vuln√©rabilit√©s</strong> : Metasploit,
              attaques brute force, exploitation MySQL
            </li>
            <li>
              <strong>Post-exploitation</strong> : Meterpreter, extraction de
              hash, pass-the-hash
            </li>
            <li>
              <strong>Techniques avanc√©es</strong> : Pivoting, proxy SOCKS,
              routage r√©seau
            </li>
            <li>
              <strong>Craquage de mots de passe</strong> : John the Ripper,
              analyse de hashes
            </li>
            <li>
              <strong>Configuration pare-feu</strong> : pfSense, r√®gles de
              filtrage, segmentation r√©seau
            </li>
            <li>
              <strong>Acc√®s √† distance</strong> : RDP, FTP, contr√¥le graphique
            </li>
          </ul>
        </div>
      </div>

      <div class="section" id="menu-rapport">
        <h2>üìö Contenu D√©taill√© du Rapport</h2>
        <div class="tools-grid">
          <div class="tool-card tool-toggle">
            <div class="tool-icon">üéØ</div>
            <div class="tool-name">Metasploit 6</div>
            <a href="#metasploit-install" class="tool-desc-link">
              <div class="tool-desc">
                Pr√©sentation et installation du Framework
              </div>
            </a>
          </div>

          <div class="tool-card tool-toggle">
            <div class="tool-icon">‚öôÔ∏è</div>
            <div class="tool-name">Laboratoire virtuel</div>
            <a href="#config-reseau-detail" class="tool-desc-link">
              <div class="tool-desc">
                Configuration r√©seau des machines cibles et de la machine
                attaquante
              </div>
            </a>
          </div>

          <div class="tool-card tool-toggle">
            <div class="tool-icon">üõ°Ô∏è</div>
            <div class="tool-name">pfSense</div>
            <a href="#pfsense-detail" class="tool-desc-link">
              <div class="tool-desc">
                Organisation du r√©seau avec Pare-feu et routeur open source
              </div>
            </a>
          </div>

          <div class="tool-card large-grouping-card tool-toggle">
            <div class="tool-icon">üí£</div>
            <div class="tool-name">Phases d'attaques / Outils Pentest</div>
            <a href="#outils-pentest-resume" class="tool-desc-link">
              <div class="tool-desc">
                Outils cl√©s utilis√©s pour l'exploitation et la
                post-exploitation.
              </div>
            </a>

            <div class="grouped-tools-list">
              <a href="#nmap-scan" class="grouped-tool-link">
                <div class="grouped-tool-item">
                  <div class="icon">üîç</div>
                  <div class="label">Nmap : Scan et √©num√©ration</div>
                </div>
              </a>
              <a href="#meterpreter-payload" class="grouped-tool-link">
                <div class="grouped-tool-item">
                  <div class="icon">üíª</div>
                  <div class="label">Meterpreter : Payload avanc√©</div>
                </div>
              </a>
              <a href="#john-the-ripper" class="grouped-tool-link">
                <div class="grouped-tool-item">
                  <div class="icon">üîì</div>
                  <div class="label">
                    John the Ripper : Craquage de mots de passe
                  </div>
                </div>
              </a>
              <a href="#proxychains-pivoting" class="grouped-tool-link">
                <div class="grouped-tool-item">
                  <div class="icon">üåê</div>
                  <div class="label">Proxychains : Routage et Pivoting</div>
                </div>
              </a>
            </div>
          </div>
        </div>
      </div>

      <div class="section content-section" id="metasploit-install">
        <h2>üéØ Pr√©sentation du Metasploit Framework</h2>

        <p>
          Metasploit n‚Äôest pas simplement un outil, c‚Äôest un v√©ritable framework
          d√©velopp√© √† l‚Äôorigine par H.D. Moore en 2003. Son objectif √©tait de
          faciliter le travail des professionnels de la cybers√©curit√© en
          automatisant les t√¢ches r√©p√©titives li√©es aux tests d‚Äôintrusion,
          notamment la cr√©ation, l‚Äôadaptation et l‚Äôex√©cution d‚Äôexploits. Au lieu
          de repartir de z√©ro √† chaque test, Metasploit permet de gagner un
          temps pr√©cieux en r√©utilisant des modules pr√©existants.
        </p>
        <p>
          Le framework, initialement √©crit en Perl puis r√©√©crit en Ruby, a connu
          un grand succ√®s dans la communaut√© de la cybers√©curit√©. Il a √©t√© par
          la suite acquis par la soci√©t√© Rapid7, sp√©cialis√©e dans l‚Äôanalyse de
          vuln√©rabilit√©s.
        </p>
        <p>
          Aujourd‚Äôhui, Metasploit contient plus de 2 400 modules d‚Äôexploits,
          ainsi que de nombreux modules destin√©s aux phases pr√© et
          post-exploitation. Il permet non seulement de s√©lectionner des
          attaques selon le contexte (gr√¢ce √† une vaste biblioth√®que en ligne),
          mais aussi de cr√©er des scripts personnalis√©s pour automatiser
          certaines √©tapes complexes du pentest.
        </p>
        <p>
          En r√©sum√©, Metasploit est un v√©ritable couteau suisse du test
          d‚Äôintrusion, capable d‚Äôaccompagner un pentesteur du d√©but √† la fin de
          son audit de s√©curit√©.
        </p>
        <h2>üéØ Installation de Metasploit Framework</h2>
        <p>
          D‚Äôapr√®s les consignes pr√©sentes sur le d√©p√¥t GitHub du framework 4, en
          plus d‚Äôavoir install√© un logiciel de virtualisation (nous avons retenu
          VirtualBox), il sera n√©cessaire d‚Äôinstaller les √©l√©ments suivants:
        </p>

        <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
          <li>Packer 5</li>
          <li>Vagrant 6</li>
          <li>Vagrant Reload Plugin 7</li>
        </ul>
        <p>
          Une fois ces √©l√©ments install√©s, nous avons proc√©d√© comme suit pour
          mettre en place notre environnement:
        </p>

        <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
          <li>Clonage du d√©p√¥t</li>
          <!---->
          Nous avons t√©l√©charg√© le contenu complet du projet Metasploitable3 en
          local √† l‚Äôaide de l‚Äôoutil git et de la commande suivante:
          <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/default.min.css"
          />
          <link
            href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.css"
            rel="stylesheet"
          />
          <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script>
          <pre><code class="language-bash">
            git clone https://github.com/rapid7/metasploitable3.git
            </code></pre>
          <!--- Figure 1 ‚Äì Cl√¥nage du d√©p√¥t GitHub de Metasploit 3 -->
          <img src="CE/Installation/CE2.png" width="800" />
          <figcaption>
            Figure 1 ‚Äì Cl√¥nage du d√©p√¥t GitHub de Metasploit 3
          </figcaption>
          <!--- Figure 2 ‚Äì Cl√¥nage complet du d√©p√¥t GitHub de Metasploit 3-->
          <img src="CE/Installation/CE3.png" width="800" />
          <figcaption>
            Figure 2 ‚Äì Cl√¥nage complet du d√©p√¥t GitHub de Metasploit 3
          </figcaption>
          <li>Cr√©ation de sous-dossiers par machine</li>
          <!---->
          <p>
            Dans le r√©pertoire du projet clon√©, nous avons cr√©√© un dossier d√©di√©
            √† chaque machine virtuelle √† installer. Ensuite, nous avons utilis√©
            la commande <strong>vagrant init</strong> pour initialiser la
            configuration sp√©cifique √† chaque machine, puis
            <strong>vagrant up </strong> pour t√©l√©charger l‚Äôimage
            correspondante, configurer automatiquement la machine virtuelle et
            la d√©marrer dans VirtualBox.
          </p>

          <li>Installation de Windows Server 2008 dans win2k8;</li>
          <!---->
          <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/default.min.css"
          />
          <link
            href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.css"
            rel="stylesheet"
          />
          <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script>
          <pre><code class="language-bash">
                PS C:\Users\iDom\metasploitable3> mkdir win2k8
                PS C:\Users\iDom\metasploitable3> cd win2k8
                PS C:\Users\iDom\metasploitable3\win2k8> vagrant init
                ,‚Üí rapid7/metasploitable3-win2k8
                PS C:\Users\iDom\metasploitable3\win2k8> vagrant up
              </code></pre>
          <!--- Figure 3 ‚Äì 
              Installation de la machine virtuelle Win 2008-->
          <img src="CE/Installation/CE4.png" width="700" />
          <figcaption>
            Figure 3 ‚Äì Installation de la machine virtuelle Win 2008
          </figcaption>
          <li>Installation de Ubuntu 14.04 dans ubuntu1404;</li>
          <!---->
          <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/default.min.css"
          />
          <link
            href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.css"
            rel="stylesheet"
          />
          <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script>
          <pre><code class="language-bash">
              PS C:\Users\iDom\metasploitable3> mkdir ubuntu1404
              PS C:\Users\iDom\metasploitable3> cd ubuntu1404
              PS C:\Users\iDom\metasploitable3\ubuntu1404> vagrant init
              ,‚Üí rapid7/metasploitable3-ub1404
              PS C:\Users\iDom\metasploitable3\ubuntu1404> vagrant up
              </code></pre>
          <!--Installation de la machine virtuelle Ubuntu14.04-->
          <img src="CE/Installation/CE7.png" width="700" />
          <figcaption>
            Figure 6 ‚Äì Installation de la machine virtuelle Ubuntu14.04
          </figcaption>
          <li>Installation de Kali Linux.</li>
          <!---->
          <p>
            Nous avons simplement t√©l√©charger son image depuis le site officiel,
            puis installer celle-ci, comme on le voit sur les captures d'√©crans
            ci-dessous.
          </p>
          <img src="CE/Installation/CE11.png" width="700" />
          <figcaption>
            Figure 7 ‚Äì T√©l√©chargement de l'image de Kali Linux
          </figcaption>
          <img src="CE/Installation/CE12.png" width="700" />
          <figcaption>
            Figure 8 ‚Äì Installation de la machine virtuelle Kali Linux
          </figcaption>
        </ul>
        <a href="#menu-rapport" class="btn" style="background: #38b4ff">
          ‚¨ÖÔ∏è Revenir au menu du rapport
        </a>
      </div>
      <!---->
      <div class="section content-section" id="config-reseau-detail">
        <h2>‚öôÔ∏è Configuration r√©seau de l'environnement virtuel</h2>
        <!----->
        <p>
          Dans cette section, nous allons pr√©senter les diff√©rentes √©tapes qui
          nous ont permis de mettre en place un r√©seau local entre les machines
          virtuelles Ubuntu 14.04 et Windows 2008, ainsi qu‚Äôune connexion
          internet entre les machines Windows 2008 et Kali Linux.
        </p>
        <p>
          On utilisera le routeur gratuit Pfsense pour r√©aliser notre
          configuration r√©seau.
        </p>
        <h2>
          ‚öôÔ∏è Configuration du r√©seau priv√© et du r√©seau interne dans Virtualbox
        </h2>
        <!---->
        <p>
          Notre objectif est de mettre en place deux r√©seaux virtuels distincts
          dans VirtualBox afin de simuler un sc√©nario de segmentation r√©seau :
        </p>
        <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
          <li>
            <strong> Un r√©seau R√©seau priv√© h√¥te</strong> (VirtualBox Host-Only
            Ethernet Adapter) pour les communications entre l‚Äôh√¥te physique et
            certaines machines virtuelles (Kali Linux, Windows Server 2008,
            pfSense).
          </li>
          <li>
            <strong> Un r√©seau R√©seau interne</strong> (intnet) permettant la
            communication isol√©e entre Windows Server 2008 et Ubuntu 14.04, via
            pfSense.
          </li>
        </ul>
        <!---->
        <p>
          Dans VirtualBox, l‚Äôoutil Network Manager (menu Fichier > Gestionnaire
          de r√©seau) permet de visualiser les r√©seaux Host-only. On constate ici
          deux r√©seaux d√©finis :
        </p>
        <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
          <li>
            VirtualBox Host-Only Ethernet Adapter avec une adresse IPv4
            10.10.10.128/24 et le serveur DHCP d√©sactiv√©.
          </li>
          <li>
            VirtualBox Host-Only Ethernet Adapter #2 avec une adresse IPv4
            192.168.12.1/24 et le serveur DHCP d√©sactiv√©.
          </li>
        </ul>
        <p>
          Ce laboratoire utilisera le premier r√©seau (10.10.10.128/24) pour
          relier la machine attaquante, la machine pivot et pfSense sur son
          interface LAN.
        </p>
        <!--CE1-->
        <img src="CE/config_mach_cibles/CE1.png" width="500" />
        <figcaption>
          Figure 9 ‚Äì Configuration Host-only dans VirtualBox
        </figcaption>

        <!--CE2-->
        <img src="CE/config_mach_cibles/CE2.png" width="500" />
        <figcaption>
          Figure 10 ‚Äì Adresse manuelle du r√©seau priv√© h√¥te
        </figcaption>
        <!---->
        <h2>‚öôÔ∏è Configuration r√©seau des machines cibles</h2>
        <h3>Windows Server 2008 : Le Pivot</h3>
        <p>
          La machine pivot Windows Server 2008 est pr√©sente √† la fois sur le
          r√©seau interne intnet (Adaptateur 2), d√©di√© √† la communication avec la
          machine Ubuntu 14.04, et sur le r√©seau reli√© √† Internet R√©seau priv√©
          h√¥te (Adaptateur 1 :VirtualBox Host-Only Ethernet Adapter) , utilis√©
          pour la communication avec Kali Linux et pfSense (IP dans le
          sous-r√©seau 10.10.10.0/24).
        </p>
        <!--CE-->
        <p>La configuration r√©seau de la machine virtuelle Windows Server
           2008 a √©t√© r√©alis√©e en acc√©dant au Centre R√©seau et Partage depuis le menu D√©marrer, puis en modifiant les param√®tres IPv4 de
           chaque adaptateur r√©seau.</p>
        <p>Les adresses attribu√©es sont les suivantes :
          <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
            <li>Adaptateur LAN : 10.10.10.2/24 (passerelle 10.10.10.128)</li>
            <li>Adaptateur WAN : 192.168.100.2/24</li>
            <li>LAN : 10.10.10.2</li>
            <li>WAN : 192.168.100.2</li>
          </ul>
        </p>
        <!--CE3-->
        <img src="CE/config_mach_cibles/CE3.png" width="500" />
        <figcaption>
          Figure 11 ‚Äì Centre R√©seau et Partage sous Windows Server 2008
        </figcaption>
        <!--CE4-->
        <img src="CE/config_mach_cibles/CE4.png" width="500" />
        <figcaption>
          Figure 12 ‚Äì Propri√©t√©s de la connexion r√©seau - Adaptateur 1 (R√©seau priv√© h√¥te)
        </figcaption>
        <!--CE5-->
        <img src="CE/config_mach_cibles/CE5.png" width="500" />
        <figcaption>
          Figure 13 ‚Äì Configuration IPv4 ‚Äì Adaptateur 1 (10.10.10.2/24, passerelle 10.10.10.128)
        </figcaption>
        <!--CE6-->
        <img src="CE/config_mach_cibles/CE6.png" width="300" />
        <figcaption>
          Figure 14 ‚Äì Statut de la connexion ‚Äî Adaptateur 1
        </figcaption>
        <!--CE7-->
        <img src="CE/config_mach_cibles/CE7.png" width="300" />
        <figcaption>
          Figure 15 ‚Äì Propri√©t√©s de la connexion r√©seau ‚Äî Adaptateur 2 (R√©seau interne)
        </figcaption>
        <!--CE8-->
        <img src="CE/config_mach_cibles/CE8.png" width="300" />
        <figcaption>
          Figure 15 ‚Äì Configuration IPv4 ‚Äî Adaptateur 2 (192.168.100.2/24)
        </figcaption>
        <!--CE9-->
        <img src="CE/config_mach_cibles/CE9.png" width="300" />
        <figcaption>
          Figure 16 ‚Äì Adaptateur r√©seau interne sur Ubuntu 14.04
        </figcaption>
        <!--CE10-->
        <img src="CE/config_mach_cibles/CE10.png" width="300" />
        <figcaption>
          Figure 16 ‚Äì Adaptateur r√©seau interne sur Ubuntu 14.04
        </figcaption>
        <h3>Ubuntu 14.04 : Machine cible ( r√©seau interne)</h3>
        <p>
          La machine Ubuntu 14.04 est connect√©e uniquement au r√©seau interne, 
          intnet (Adaptateur 1 : R√©seau interne), pour √©changer exclusivement 
          avec Windows Server 2008.
        </p>
        <!--CE11-->
        <img src="CE/config_mach_cibles/CE11.png" width="500" />
        <figcaption>
          Figure 17 ‚Äì Adaptateur r√©seau interne sur Ubuntu 14.04
        </figcaption>
        <p>
          La configuration r√©seau de la machine Ubuntu 14.04 a √©t√© effectu√©e uniquement pour l‚Äôadaptateur
          r√©seau interne (intnet), destin√© √† communiquer avec Windows Server 2008 via l‚Äôadresse IP
          192.168.100.3/24.
        </p>
        <p>
          Pour r√©aliser ce param√©trage, nous avons modifi√© le fichier de configuration des interfaces r√©seau
          en ex√©cutant la commande suivante dans le terminal :
        </p>
        <!---->
          <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/default.min.css"
          />
          <link
            href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.css"
            rel="stylesheet"
          />
          <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script>
          <pre><code class="language-bash">
                sudo nano /etc/network/interfaces
              </code></pre>
        <!--Code-->
        Le contenu du fichier /etc/network/interfaces a √©t√© d√©fini comme suit :
        <!---->
          <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/default.min.css"
          />
          <link
            href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.css"
            rel="stylesheet"
          />
          <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script>
          <pre><code class="language-bash">
                # The loopback network interface
                auto lo
                iface lo inet loopback
                # The primary network interface
                auto eth0
                iface eth0 inet static
                address 192.168.100.3
                netmask 255.255.255.0
              </code></pre>
        <!--CE12-->
        <img src="CE/config_mach_cibles/CE12.png" width="500" />
        <figcaption>
          Figure 18 ‚Äì Connexion √† la machine Ubuntu 14.04 et ouverture du fichier /etc/network/interfaces
        </figcaption>
        <!--CE13-->
        <img src="CE/config_mach_cibles/CE13.png" width="500" />
        <figcaption>
          Figure 19 ‚Äì Configuration IPv4 statique dans /etc/network/interfaces (192.168.100.3/24)
        </figcaption>
        <h2>‚öôÔ∏è Configuration r√©seau de la machine attaquante</h2>
        <h3>Kali Linux : Machine attaquante</h3>
        <p>
          La machine attaquante Kali Linux est reli√©e exclusivement au R√©seau priv√© h√¥te (Adaptateur
          1 : VirtualBox Host-Only Ethernet Adapter), pour communiquer avec Windows Server 2008
          et pfSense (IP dans le sous-r√©seau 10.10.10.0/24).
        </p>
        <!--CODE-->
        <!---->
          <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/default.min.css"
          />
          <link
            href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.css"
            rel="stylesheet"
          />
          <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script>
          <pre><code class="language-bash">
                sudo ip addr add 10.10.10.100/24 dev eth0
              </code></pre>
        <p>
          Le param√©trage de l‚Äôadresse IP a √©t√© effectu√© directement depuis le terminal √† l‚Äôaide de la
          commande :
        </p>
        
        <!--CE14-->
        <img src="CE/config_mach_cibles/CE14.png" width="500" />
        <figcaption>
          Figure 20 ‚Äì Interface r√©seau priv√©e h√¥te sur Kali Linux
        </figcaption>

        <p>
          Cette configuration permet √† Kali Linux de disposer d‚Äôune adresse fixe 10.10.10.100/24 sur
          son interface eth0, utilis√©e pour initier les attaques vers la machine pivot Windows Server 2008.
        </p>
        <a href="#menu-rapport" class="btn" style="background: #38b4ff">
          ‚¨ÖÔ∏è Revenir au menu du rapport
        </a>
      </div>
      <!---->
      <div class="section content-section" id="pfsense-detail">
        <h2>üõ°Ô∏è Organisation du r√©seau avec Pare-feu et routeur open source</h2>
        <!---->
         <!----->
        <p>
          Le pare-feu <strong>pfSense</strong> a √©t√© d√©velopp√© sous le syst√®me d'exploitation FreeBSD par Chris Buechler et Scott Ullrich. 
          Il s'agit d'une solution de s√©curit√© enti√®rement gratuite et qui d'apr√®s le <a href="https://www.pfsense.org/getting-started/">site officiel</a>, 
          a d√©montr√© sa robustesse face √† de nombreuses solutions commerciales.
        </p>
        <p>
          On utilisera donc <strongp>PfSense</strong> comme routeur pour r√©aliser notre configuration r√©seau.
        </p>
        <!---->
        <h2>‚öôÔ∏è Installation et configuration de pfSense></h2>
        Nous utilisons <strong>pfSense</strong> en mode ligne de commande, l‚Äôinterface graphique 
        √©tant difficilement exploitable depuis <strong>Windows Server 2008 R2 Standard</strong>.
        <!---->
        <!---->
        <h3>T√©l√©chargement et installation</h3>
        <p>Nous commen√ßons par t√©l√©charger l'ISO d'installation depuis le <a href="https://www.pfsense.org/getting-started/">site officiel</a></p>
        <!--CE1-->
        <img src="CE/pfSense/CE1.png" width="500" />
        <figcaption>
          Figure 21 ‚Äì T√©l√©chargement de pfSense depuis le site officiel
        </figcaption>
        <p>Apr√®s extraction des fichiers t√©l√©charg√©s, nous cr√©ons une nouvelle machine virtuelle dans VirtualBox.
          Nous s√©lectionnons le type BSD, sous-type FreeBSD (64-bit), et attachons l‚Äôimage ISO comme disque
          d‚Äôamor√ßage.
        </p>
        <!--CE2-->
        <img src="CE/pfSense/CE2.png" width="500" />
        <figcaption>
          Figure 22 ‚Äì Cr√©ation de la machine virtuelle pfSense dans VirtualBox
        </figcaption>
        <!---->
         <p>Lors du premier d√©marrage, l‚Äôinstallateur Netgate se lance. 
          Nous acceptons les conditions de licence.
        </p>
        <!--CE3-->
        <img src="CE/pfSense/CE3.png" width="500" />
        <figcaption>
          Figure 23 ‚Äì Chargement de l‚Äôimage ISO et lancement de l‚Äôinstallation
        </figcaption>
        <!---->
        <p>Une fois l‚Äôinstallation termin√©e, nous retirons l‚ÄôISO et red√©marrons la machine virtuelle. 
          pfSense affiche alors son menu principal en console.
        </p>
        <!--CE4-->
        <img src="CE/pfSense/CE4.png" width="500" />
        <figcaption>
          Figure 24 ‚Äì Menu principal de configuration console pfSense
        </figcaption>
        <!---->
        <!---->
        <h3>Param√©trage de l‚Äôinterface WAN</h3>
        <!---->
        <p>Nous acc√©dons au menu console et choisissons l‚Äôoption 2: <strong>Set interface(s) IP address</strong>, puis
s√©lectionnons <strong>WAN (em0)</strong>. Nous d√©sactivons le DHCP (n) et configurons l‚Äôadresse IPv4 statique
192.168.148.128/24 avec comme passerelle 192.168.148.2, d√©finie comme passerelle par d√©faut (y).

        </p>
        <!--CE5-->
        <img src="CE/pfSense/CE5.png" width="500" />
        <figcaption>
          Figure 25 ‚Äì  Configuration IPv4 statique sur l‚Äôinterface WAN
        </figcaption>
        <!---->
        <p>Apr√®s validation, pfSense applique la configuration et confirme que l‚Äôadresse IPv4 du WAN est bien
            d√©finie sur 192.168.148.128/24
        </p>
        <!--CE6-->
        <img src="CE/pfSense/CE6.png" width="500" />
        <figcaption>
          Figure 26 ‚Äì Confirmation de l‚Äôadresse IPv4 sur l‚Äôinterface WAN
        </figcaption>
        <!---->
        <!---->
        <h3>Param√©trage de l‚Äôinterface LAN</h3>
        <p>Nous proc√©dons ensuite √† la configuration de l‚Äôinterface <strong>LAN (em1)</strong> depuis le m√™me menu console.
          Nous choisissons de ne pas utiliser le DHCP (n) pour l‚Äôadresse IPv4 et attribuons l‚Äôadresse statique
          10.10.10.128/24. La passerelle IPv4 reste 10.10.10.128 et nous la d√©finissons comme passerelle par
          d√©faut (y).
        </p>
        <!--CE5-->
        <img src="CE/pfSense/CE7.png" width="500" />
        <figcaption>
          Figure 27 ‚Äì S√©lection de l‚Äôinterface LAN dans pfSense
        </figcaption>
        <!---->
        <p>Nous d√©sactivons IPv6 (n) puis activons le serveur DHCP sur le LAN (y) avec une plage d‚Äôadresses
           allant de 10.10.10.100 √† 10.10.10.200. Apr√®s validation, pfSense applique la configuration et confirme que l‚Äôadresse IPv4 du LAN est bien
           d√©finie sur 10.10.10.128/24.
        </p>
        <!--CE6-->
        <img src="CE/pfSense/CE8.png" width="500" />
        <figcaption>
          Figure 28 ‚Äì Configuration IPv4 statique et DHCP sur le LAN et Confirmation de l‚Äôadresse IPv4 sur l‚Äôinterface LAN
        </figcaption>
        <!---->

        <!---->
        <h2>‚öôÔ∏è D√©finition des r√®gles personnalis√©es en ligne de commande</h2>
        <p>Les r√®gles que nous avons mises en place pour le routeur pfSense sont inspir√©es 
          de celles propos√©es par Dustin Noe dans son article sur <a href="https://medium.com/@noe.dustin/advanced-pentesting-lab-with-vmware-vyos-kali-and-metasploitable3-3d0c07419e49">VyOS 11</a>.</p>
          
        <p>Lors du param√©trage des interfaces r√©seau de <strong>pfSense</strong>, nous avons d√©fini:
          <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
            <li>L‚Äôinterface WAN avec l‚Äôadresse IP 192.168.148.2/24</li>
            <li>L‚Äôinterface LAN avec l‚Äôadresse IP 10.10.10.128/24</li>
          </ul>
          Les machines <strong>Windows Server 2008</strong> et <strong>Ubuntu 14.04</strong> sont toutes deux connect√©es derri√®re le
          pare-feu pfSense, sur le r√©seau LAN.</p>
        <!---->
        <!---->
        <h3>Filtrage du trafic entrant</h3>
        <!---->
        <p>Pour le trafic entrant, le pare-feu autorise: 
          <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
            <li>Le <strong>trafic √©tabli et associ√©</strong>, c‚Äôest-√†-dire les connexions d√©j√† initi√©es ou attendues (via les
            protocoles TCP et UDP)</li>
            <li>Le trafic <strong>entrant sp√©cifique:</strong> une connexion TCP provenant de n‚Äôimporte quelle adresse √†
            destination de 10.10.10.128 sur le port 8585</li>
          </ul>
          En revanche, <strong>tout autre trafic entrant est bloqu√©</strong>, de mani√®re √† forcer tout
          passage par le routeur, qui joue alors pleinement son r√¥le de point de contr√¥le central du r√©seau.
        </p>
        <!---->
        <!---->
        <h3>Filtrage du trafic sortant</h3>
        <!---->
        <p>Pour le trafic sortant, le pare-feu autorise: 
          <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
            <li>Le <strong>trafic √©tabli et associ√©</strong>, via les protocoles TCP et UDP</li>
            <li>Le trafic <strong>TCP sortant</strong> vers le port 443, c'est √† dire les connexions <strong>HTTPS</strong></li>
          </ul>
          <strong>Tout autre trafic sortant est bloqu√©</strong>, afin de limiter les flux non contr√¥l√©
          sortant du r√©seau LAN
        </p>
        <!--CE-->
        <!--CE8-->
        <img src="CE/pfSense/CE9.png" width="500" />
        <figcaption>
          Figure 30 ‚Äì Configuration des r√®gles de trafic entrant et sortant sur la machine pfSense
        </figcaption>
        <!---->
        <!---->
        <!---->
        <p>Ces r√®gles de pare-feu permettent de: 
          <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
            <li>Prot√©ger les machines internes contre des connexions non sollicit√©es;</li>
            <li><strong>Filtrer pr√©cis√©ment les flux de sortie</strong>;</li>
            <li><strong>Contr√¥ler tout le trafic</strong> via une seule passerelle (pfSense), notamment dans un sc√©nario de
              pentest en environnement segment√©.</li>
          </ul>
          Il est possible d‚Äôajouter manuellement des r√®gles dans le fichier <strong>/etc/pf.conf</strong>.
          Apr√®s avoir √©crit ou modifi√© ce fichier, on recharge les r√®gles avec:
        </p>
        <!--Code-->
        <!--CODE-->
        <!---->
          <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/default.min.css"
          />
          <link
            href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.css"
            rel="stylesheet"
          />
          <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script>
          <pre><code class="language-bash">
                pfctl -f /etc/pf.conf
              </code></pre>
        <!--CE-->
        <!--CE9-->
        <img src="CE/pfSense/CE10.png" width="500" />
        <figcaption>
          Figure 31 ‚Äì Chargement des nouvelles r√®gles de trafic entrant et sortant sur la machine pfSense
        </figcaption>
        
        <!---->
        <!---->
        <!---->
        <p>Les r√®gles d√©finies dans <strong>/etc/pf.conf</strong> ne sont pas celles utilis√©es par pfSense En
          effet, avec pfSense, les r√®gles configur√©es via l‚Äôinterface web ne sont pas stock√©es dans <strong>/etc/pf.conf</strong>.
          Elles sont en r√©alit√© g√©n√©r√©es dynamiquement √† partir du fichier <strong>/conf/config.xml</strong>, et charg√©es
          automatiquement via les outils internes de pfSense. Cela signifie que: 
          <ul style="margin-left: 1.5rem; margin-top: 0.5rem">
            <li>Le fichier <strong>/etc/pf.conf</strong> est vide ou minimal par d√©faut;</li>
            <li>Les r√®gles actuellement actives (affich√©es par pfctl -sr) ne proviennent pas de <strong>pf.conf</strong>;</li>
            <li>Si l‚Äôon charge un fichier <strong>pf.conf</strong> avec <strong>pfctl -f</strong>, cela remplace les r√®gles dynamiques en m√©moire;</li>
            <li><strong>Ce changement n‚Äôest pas persistant: au red√©marrage, pfSense r√©initialise les r√®gles √† partir de sa
              configuration interne.</strong></li>
          </ul>
        </p>

        <a href="#menu-rapport" class="btn" style="background: #38b4ff">
          ‚¨ÖÔ∏è Revenir au menu du rapport
        </a>
      </div>
      <!---->
      <div class="section content-section" id="nmap-scan">
        <h2>üîç Nmap : Scan et √©num√©ration</h2>

        <a href="#menu-rapport" class="btn" style="background: #38b4ff">
          ‚¨ÖÔ∏è Revenir au menu du rapport
        </a>
      </div>
      <!---->
      <div class="section content-section" id="meterpreter-payload">
        <h2>üíª Meterpreter : Payload avanc√©</h2>

        <a href="#menu-rapport" class="btn" style="background: #38b4ff">
          ‚¨ÖÔ∏è Revenir au menu du rapport
        </a>
      </div>
      <!---->
      <div class="section content-section" id="john-the-ripper">
        <h2>üîì John the Ripper : Craquage de mots de passe</h2>

        <a href="#menu-rapport" class="btn" style="background: #38b4ff">
          ‚¨ÖÔ∏è Revenir au menu du rapport
        </a>
      </div>
      <!---->
      <div class="section content-section" id="proxychains-pivoting">
        <h2>üåê Proxychains : Routage et Pivoting</h2>

        <a href="#menu-rapport" class="btn" style="background: #38b4ff">
          ‚¨ÖÔ∏è Revenir au menu du rapport
        </a>
      </div>

      <div class="section">
        <a href="#" class="btn secondary-btn"
          >‚≠ê Mes autres projets sur GitHub</a
        >
      </div>
    </div>

    <div class="footer">
      <p>üîê Projet r√©alis√© dans un cadre acad√©mique et √©thique</p>
      <p style="margin-top: 0.5rem; font-size: 0.9rem">
        Les techniques pr√©sent√©es sont destin√©es uniquement √† des fins
        √©ducatives et doivent √™tre utilis√©es de mani√®re responsable.
      </p>
    </div>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const toggles = document.querySelectorAll(".tool-toggle");
        const allLinks = document.querySelectorAll(
          ".tool-desc-link, .grouped-tool-link"
        );

        // 1. GESTION DE L'ACCORD√âON (Clic sur la carte DIV)
        toggles.forEach((card) => {
          card.addEventListener("click", (e) => {
            // S'assurer que le clic n'est pas sur un lien interne (qui g√®re la navigation)
            if (e.target.closest("a")) {
              return;
            }

            const isExpanded = card.classList.contains("is-expanded");

            // Ferme toutes les cartes actuellement ouvertes
            document
              .querySelectorAll(".tool-toggle.is-expanded")
              .forEach((openCard) => {
                openCard.classList.remove("is-expanded");
              });

            // Ouvre ou ferme la carte cliqu√©e
            if (!isExpanded) {
              card.classList.add("is-expanded");
            }
          });
        });

        // 2. GESTION DU LIEN ET DU SURLIGNAGE
        allLinks.forEach((link) => {
          link.addEventListener("click", (e) => {
            // Retire le surlignage de tous les liens
            allLinks.forEach((l) => l.classList.remove("is-selected"));

            // Applique le surlignage au lien cliqu√©
            link.classList.add("is-selected");

            // Ferme l'accord√©on apr√®s la s√©lection (bonne UX)
            const parentCard = link.closest(".tool-toggle");
            if (parentCard) {
              parentCard.classList.remove("is-expanded");
            }

            // Le comportement par d√©faut du lien (navigation vers le #hash) s'ex√©cute ensuite.
          });
        });

        // GESTION DU SURLIGNAGE AU CHARGEMENT DE LA PAGE (si un hash est pr√©sent dans l'URL)
        const currentHash = window.location.hash;
        if (currentHash) {
          const targetLink = document.querySelector(`a[href="${currentHash}"]`);
          if (targetLink) {
            targetLink.classList.add("is-selected");
          }
        }
      });
    </script>
  </body>
</html>


